<ul class="tree">
  <% @folders.each do |folder| %>
    <% if folder[:has_children] %>
      <li>
        <details <%= "open" if (folder[:is_current] || folder[:is_parent]) %>>
          <summary  class="<%= 'highlight' if folder[:is_current] %>">
            <a href="<%= folder[:url] %>" data-turbo="false"><%= folder[:name] %></a>
          </summary>

          <%= render 'tree_children', children: folder[:children] if folder[:has_children] %>
        </details>
      </li>
    <% else %>
      <li class="no-children <%= 'highlight' if folder[:is_current] %>">
        <a href="<%= folder[:url] %>" data-turbo="false"><%= folder[:name] %></a>
      </li>
    <% end %>
  <% end %>
</ul>
